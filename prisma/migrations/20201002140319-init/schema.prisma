generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = "***"
}

model User {
  id                       Int        @id @default(autoincrement())
  email                    String     @unique
  username                 String     @unique
  loginSecret              String?
  avatar                   String?    @default("https://res.cloudinary.com/iib-webdevs/image/upload/v1601031013/DontDeleteMe/pngtree-businessman-user-avatar-free-vector-png-image_1538405.jpg")
  password                 String
  OneTimePassword          Int?
  PasswordResetTokenExpiry Float?
  PasswordResetToken       String?
  MessagesSent             Messages[] @relation("Sender")
  MessagesRecieved         Messages[] @relation("Reciever")
  followedBy               User[]     @relation("UserFollows", references: [id])
  following                User[]     @relation("UserFollows", references: [id])
  friends                  User[]     @relation("UserFirends")
  friend                   User?      @relation("UserFirends", fields: [friendId], references: [id])
  friendId                 Int?
  createdAt                DateTime   @default(now())
  updatedAt                DateTime   @updatedAt
}

model Messages {
  id                 Int      @id @default(autoincrement())
  content            String?
  image              String?
  from               User     @relation("Sender", fields: [SenderId], references: [id])
  SenderId           Int
  to                 User     @relation("Reciever", fields: [RecieverId], references: [id])
  RecieverId         Int
  isSenderFriend     Boolean  @default(false)
  isSenderFollowing  Boolean  @default(false)
  isSenderFollowedBy Boolean  @default(false)
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

}
